# Seata GRPC Communication Configuration
# This configuration demonstrates how to enable GRPC protocol for Seata communication

seata:
  enabled: true
  application-id: "grpc-communication-sample"
  tx-service-group: "grpc_tx_group"
  enable-auto-data-source-proxy: false
  
  # Transport configuration - GRPC protocol
  transport:
    # Set protocol to grpc to enable GRPC communication
    protocol: "grpc"
    server: "NIO"
    heartbeat: true
    enableClientBatchSendRequest: false
    threadFactory:
      bossThreadPrefix: "NettyBoss"
      workerThreadPrefix: "NettyServerNIOWorker"
      serverExecutorThreadPrefix: "NettyServerBizHandler"
      shareBossWorker: false
      clientSelectorThreadPrefix: "NettyClientSelector"
      clientSelectorThreadSize: 1
      clientWorkerThreadPrefix: "NettyClientWorkerThread"
      bossThreadSize: 1
      workerThreadSize: "default"
    shutdown:
      wait: 3
    serialization: "seata"
    compressor: "none"
  
  # Service discovery configuration
  service:
    vgroup-mapping:
      grpc_tx_group: "default"
    grouplist:
      default: "127.0.0.1:8091"
    enable-degrade: false
    disable-global-transaction: false
  
  # Registry configuration
  registry:
    type: "file"
    file:
      name: "file.conf"
  
  # Client configuration
  client:
    rm:
      async-commit-buffer-limit: 10000
      lock:
        retry-interval: 10
        retry-times: 30
        retry-policy-branch-rollback-on-conflict: true
    tm:
      commit-retry-count: 5
      rollback-retry-count: 5
      default-global-transaction-timeout: 60000
      degrade-check: false
      degrade-check-period: 2000
      degrade-check-allow-times: 10
    undo:
      data-validation: true
      log-serialization: "jackson"
      log-table: "undo_log"
      only-care-update-columns: true
    load-balance:
      type: "RandomLoadBalance"
      virtual-nodes: 10
  
  # TODO: Enhanced GRPC-specific configurations will be added here
  # when new GRPC features are merged:
  # grpc:
  #   connection-pool:
  #     max-connections: 10
  #     min-connections: 1
  #   load-balancing:
  #     strategy: "round_robin"
  #   streaming:
  #     enabled: true
  #   monitoring:
  #     enabled: true
  #     metrics-port: 9090